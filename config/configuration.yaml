# ======================
# БАЗОВЫЕ НАСТРОЙКИ
# ======================
homeassistant:
  name: Умный Дом
  latitude: 59.9041
  longitude: 30.5094
  elevation: 11
  unit_system: metric
  time_zone: Europe/Moscow
  internal_url: "http://localhost:8123"
  external_url: "https://ваш-проект.up.railway.app"

  # Полное отключение несовместимых функций
  packages: !include_dir_named packages
  auth_providers:
    - type: homeassistant

# ======================
# ОТКЛЮЧЕНИЕ СЕРВИСОВ
# ======================
dhcp:
  enabled: false
  enable_auto_dhcp: false
  enable_network_autodiscovery: false

default_config:
  disable:
    - dhcp
    - discovery
    - ssdp
    - zeroconf
    - upnp
    - met
    - radio_browser
    - mobile_app
    - cloud
    - updater
    - google_assistant
    - alexa

# ======================
# НАСТРОЙКА MQTT
# ======================
mqtt:
  broker: r62e666b.ala.eu-central-1.emqxsl.com
  port: 8883
  username: mqtt_user1
  password: RfNz3222281488
  discovery: false
  client_id: "railway_ha_${HOSTNAME}"
  keepalive: 60
  reconnect_interval: 30
  protocol: 3.1.1
  birth_message:
    topic: "homeassistant/status"
    payload: "online"
    qos: 1
    retain: true

# ======================
# ЛОГИРОВАНИЕ
# ======================
logger:
  default: critical
  logs:
    homeassistant.components.dhcp: fatal
    homeassistant.components.mqtt: warning
    homeassistant.core: error
    homeassistant.setup: error

# ======================
# ОПТИМИЗАЦИЯ
# ======================
system_health:
  mode: hidden

http:
  server_port: 8123
  use_x_forwarded_for: true
  ip_ban_enabled: false
  login_attempts_threshold: -1
  trusted_proxies:
    - 10.0.0.0/8
    - 172.16.0.0/12
    - 192.168.0.0/16
